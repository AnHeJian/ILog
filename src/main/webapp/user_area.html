<!DOCTYPE html>
<!--[if IE 9 ]><html class="ie9"><![endif]-->
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
	<meta name="format-detection" content="telephone=no">
	<meta charset="UTF-8">

	<meta name="description" content="Violate Responsive Admin Template">
	<meta name="keywords" content="Super Admin, Admin, Template, Bootstrap">

	<title>用户活跃区域分析</title>
	<script src="js/jquery-3.2.1.min.js"></script>

	<!-- Bootstrap -->
	<script src="js/bootstrap.min.js"></script>
	<!--引入ECharts-->
	<script src="js/echarts/echarts.min.js"></script>
	<script src="js/echarts/china.js"></script>
	<script src="js/echarts/dark.js"></script>

	<!-- CSS -->
	<link rel="stylesheet" type="text/css" href="js/bootstrap-3.3.4.css">
	<link href="css/animate.min.css" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="js/font-awesome.4.6.0.css">
	<link href="css/form.css" rel="stylesheet">
	<link href="css/calendar.css" rel="stylesheet">
	<link href="css/media-player.css" rel="stylesheet">
	<link href="css/style.css" rel="stylesheet">
	<link href="css/icons.css" rel="stylesheet">
	<link href="css/generics.css" rel="stylesheet"> 
	<link href="css/mstp_map.css" rel="stylesheet"> 
	<link href="css/menu.css" rel="stylesheet">
    <link href="css/sidebar.css" rel="stylesheet">

</head>

<body style="background-image: url(img/background.jpg); background-size: 100%;background-size:cover;background-attachment:fixed">
	<header id="header" class="media">
		<a href="" id="menu-toggle"></a> 
		<a class="logo pull-left" href="index.html">用户活跃度分析</a>


	</header>

	<div class="clearfix"></div>

	<section id="main" class="p-relative" role="main">

		<!-- Sidebar -->
		<aside id="sidebar">

          <ul class="list-unstyled side-menu" style="width: 100%!important;padding-top: 20px">

              <li class="list-group-item" id="userarea"><span class="message-tag progress-bar-warning"></span>用户活跃度变化</li>
              <li class="active cb1" id="userarea1">
                <a href="user_area.html" id='menuurl1'>
                    <i class="fa fa-bar-chart-o"></i><span> 全息图概览</span>
                </a>
            </li>
            <li class=" cb1" id="userarea2">
                <a href="detail_user_area.html"  id='menuurl2'>
                    <i class="fa fa-sort-amount-asc"></i><span> 详细信息</span>
                </a>
            </li>


            <li class="list-group-item" id="brand"><span class="message-tag progress-bar-danger"></span>用户终端品牌</li>
            <li class="active cb2">
                <a href="brand.html" id='menuurl1'>
                    <i class="fa fa-bar-chart-o"></i><span> 用户品牌特征</span>
                </a>
            </li>
            <li class="active cb2">
                <a href="detail_brand.html"  id='menuurl2'>
                    <i class="fa fa-sort-amount-asc"></i><span> 用户品牌特征变化</span>
                </a>
            </li>


            <li  class="list-group-item" id="surfingTime"><span class="message-tag progress-bar-info"></span>用户上网时段</li>
            <li class="active cb3">
                <a href="surfing_time.html" id='menuurl1'  >
                    <i class="fa fa-bar-chart-o"></i><span>上网时段分布</span>
                </a>
            </li>
            <li class="active cb3">
                <a href="changeOfSurfingTime.html"  id='menuurl2'>
                    <i class="fa fa-sort-amount-asc"></i><span> 上网时段变化</span>
                </a>
            </li>



            <li class="list-group-item" id="userpic"><span class="message-tag progress-bar-success"></span>用户画像</li>   
            <li class="active cb4" >
                <a href="user_pic_shopping.html" id='menuurl1'>
                    <i class="fa fa-bar-chart-o"></i><span> 用户消费习惯分析</span>
                </a>
            </li>
            <li class="active cb4">
                <a href="user_pic.html"  id='menuurl2'>
                    <i class="fa fa-sort-amount-asc"></i><span> 词云形象图</span>
                </a>
            </li>



            <li  class="list-group-item" id="top20"><span class="message-tag progress-bar-warning"></span>热门网站TOP20 </li>
            <li  class="active cb5">
                <a href="topPV.html"  id='menuurl1'>
                    <i class="fa fa-bar-chart-o "></i><span> PV</span>
                </a>
            </li>
            <li class="active cb5" >
                <a href="topUV.html"  id='menuurl2'>
                    <i class="fa fa-sort-amount-asc"></i><span> UV</span>
                </a>
            </li>


        </ul>
    </aside>

    <!-- Content -->
    <section id="content" class="container">

       <!-- Breadcrumb -->
       <ol class="breadcrumb hidden-xs">
        <li><a href="index.html">首页</a></li>
        <li class="active">用户活跃度分布</li>
    </ol>
    <h4 class="page-title">用户活跃度分布图</h4>

    <form class="form-inline" name="usr_choice" action="/usrloc.do">
        <div class="pull-left">
            <span class="page-title">时间：</span>
            <div class="btn-group">
                <button type="button" class="btn btn-default " data-toggle="modal" data-target="#addTable" id="btn-userarea-today" style="background-color: #66FFFF">
                    今天
                </button>
                <button type="button" class="btn btn-default" id="btn-userarea-yesterday" style="background-color: #66FFFF">
                    昨天
                </button>
                <button type="button" class="btn btn-default " data-toggle="modal" data-target="#changeAllTable" id="btn-userarea-svn"style="background-color: #66FFFF">
                    最近七天
                </button>
            </div>
        </div>

        <!-- 日历控件设置初始值value-->
        <!-- <div class="form-group ">  -->               
        <div class="pull-left" id="DateInput">
            <input type="date" class="form-control " id="singleDate_usersrea" value="2017-01-01"
            required="true" dateISO="true">
        </div>
        <!-- </div> -->
        <!-- </div> -->

        <!-- </form> -->
        <div id="select_clear">

            <div class="form-group">
                <span class="page-title">指标：</span>
                <select class="form-control " id="userareaKind">
                    <option value="PV">浏览量PV</option>
                    <option value="UV">访客数UV</option>
                </select>
            </div>

            <div class="form-group">
                <button type="button" class="btn  pull-right btn-default" id="btn-schUserArea" onclick="showmap()"style="background-color: #66FFFF">
                    <span class="glyphicon glyphicon-search" aria-hidden="true"></span> 搜索</button>
                </div>
            </div>
        </form>



        <div class="block-area">

            <div class="row">
             <!-- World Map -->
             <div class="col-md-12">
              <div id="mainEC" style="width: 100%;height:600px;"></div>
              <script type="text/javascript">


    //            $(".cb").css("display","none");//隐藏全选框
    //            $("#userarea").click(function(){
    // $(".cb").css("display","userarea1");
    // $(".cb").css("display","userarea2");

    //                                });
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('mainEC'),'dark');

// 指定图表的配置项和数据
var option = {
    // backgroundColor: 'rgba(0,0,0,0)',
    backgroundColor:'#transparent',
    title: {
        text: '用户活跃度区域分布',
        textStyle : {fontSize : 23},
        subtext: '',
        left: 'center',
        subtextStyle: {
            fontSize : 16,
            color : '#040402'
        }
    },
    tooltip: {
        trigger: 'item'
    },
    legend: {
        orient: 'vertical',
        left: 'left',
        data:[],
        textStyle: {
            color: '#90F45C',
            fontWeight: 'bolder'
        }
    },
    visualMap: {
        min: 0,
        max: 2500,
        left: 'left',
        top: 'bottom',
        textStyle: {
            color: '#90F45C',
            fontWeight: 'bolder'
        },
                text: ['高','低'],           // 文本，默认为数值文本
                calculable: true
            },
            toolbox: {
                show: true,
                orient: 'vertical',
                left: 'right',
                top: 'center',
                feature: {
                    dataView: {readOnly: false},
                    restore: {},
                    saveAsImage: {}
                }
            },
            series: [
            {
                name: '',
                type: 'map',
                mapType: 'china',
                roam: false,
                label: {
                    normal: {
                        show: true
                    },
                    emphasis: {
                        show: true
                    }
                },
                data: []
            }

            ]
        };

//使网页初始时有地图显示
loadDATA();
myChart.setOption(option);

function loadDATA(){
	//获取用户选择
    var date = document.getElementById('singleDate_usersrea').value;
    var index = document.getElementById('userareaKind').value;

    option.legend.data.push(index);
    option.title.subtext = date;
    option.series[0].name = index;
    $.ajax({
        type : "post",
        async : false, //同步执行
        url : "usrloc.do",
        data : {
            "usrinfo" : JSON.stringify(date+","+index)//将用户选择传递给后台，其中usrinfo相当于传递的数据的id，
													  //后台根据这个id来获得数据
                                                    },
        dataType : "json", //返回数据形式为json
        success : function(result) {
            if(result){
                //直接将ajax获取的json(即result)复制给echarts，因为option.series[0].data的格式和result格式完全一致
                option.series[0].data = result;
            }
        },
        error:function(){
            alert("查无数据");
        }
    });

}

function showmap() {

    loadDATA();

    myChart.setOption(option);
}

</script>

            <!-- <div class="tile">
                <h2 class="tile-title"></h2>
                <div class="tile-config dropdown">
                    <a data-toggle="dropdown" href="" class="tooltips tile-menu" title="Options"></a>
                    <ul class="dropdown-menu animated pull-right text-right">
                        <li><a href="">Refresh</a></li>
                        <li><a href="">Settings</a></li>
                    </ul>
                </div>
               
    
            </div> -->
        </div>
    </div>
</div>


<hr class="whiter m-t-20 m-b-20" />

<br/><br/><br/>
</section>




<!-- Javascript Libraries -->
<!-- jQuery -->
<!-- <script src="js/jquery-1.10.2.js"></script> <! jQuery Library --> 
<!-- <script src="js/jquery-ui-1.11.0.js"></script> <! jQuery UI --> 
<!-- <script src="js/jquery.easing.1.3.js"></script> <! jQuery Easing - Requirred for Lightbox --> 
<script src="js/jquery-3.2.1.min.js"></script>

<!-- Bootstrap -->
<script src="js/bootstrap.min.js"></script>
<!--引入ECharts-->
<script src="js/echarts/echarts.min.js"></script>
<script src="js/echarts/china.js"></script>
<script src="js/echarts/dark.js"></script>
<script src="js/echarts/dark.js"></script>

<!-- Charts -->
<script src="js/charts/jquery.flot.js"></script> <!-- Flot Main -->
<script src="js/charts/jquery.flot.time.js"></script> <!-- Flot sub -->
<script src="js/charts/jquery.flot.animator.min.js"></script> <!-- Flot sub -->
<script src="js/charts/jquery.flot.resize.min.js"></script> <!-- Flot sub - for repaint when resizing the screen -->
<script src="js/charts/jquery.flot.orderBar.js"></script> <!-- Flot Bar chart -->
<script src="js/charts/jquery.flot.pie.min.js"></script> <!-- Flot Pie chart -->

<script src="js/sparkline.min.js"></script> <!-- Sparkline - Tiny charts -->
<script src="js/easypiechart.js"></script> <!-- EasyPieChart - Animated Pie Charts -->
<script src="js/mstp_map.js"></script> <!-- All the above chart related functions -->

<!-- Map -->
<script src="js/maps/jvectormap.min.js"></script> <!-- jVectorMap main library -->

<!-- UX -->
<script src="js/scroll.min.js"></script> <!-- Custom Scrollbar -->

<!-- Other -->
<script src="js/calendar.min.js"></script> <!-- Calendar -->
<script src="js/feeds.min.js"></script> <!-- News Feeds -->


<!-- All JS functions -->
<script src="js/functions.js"></script>

<script>
	$(document).ready(function() {
		$("#DateInput").css("width","16%");
		$("#userareaKind").css("width","100px");
        //////////////////////////////////////////
       $(".cb1").css("display","none");
       $("#userarea").click(function(){
        $(".cb1").toggle();
    })
        $(".cb2").css("display","none");
       $("#brand").click(function(){
        $(".cb2").toggle();
    })
        $(".cb3").css("display","none");
       $("#surfingTime").click(function(){
        $(".cb3").toggle();
    })
        $(".cb4").css("display","none");
       $("#userpic").click(function(){
        $(".cb4").toggle();
    })
        $(".cb5").css("display","none");
       $("#top20").click(function(){
        $(".cb5").toggle();
    })
   });
</script>
</body>
</html>
